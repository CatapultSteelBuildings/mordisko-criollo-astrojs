---
import { SEO } from 'astro-seo';

import { businessData } from '@/core/data/business.data';

interface Props {
  title: string;
  metaDescription: string;
  lang: string;
  noindex: boolean;
  nofollow: boolean;
  schema?: Record<string, unknown> | Record<string, unknown>[] | null;
}

const {
  title = 'Mordisko Criollo',
  metaDescription,
  lang = 'es',
  noindex = false,
  nofollow = false,
  schema = null,
} = Astro.props;
const logo = `${businessData.site}/assets/images/logo/mordisko-criollo.png`;
const schemaScriptTag = JSON.stringify(schema);

const url = Astro.url;
---

<head>
  <meta charset="utf-8" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <meta name="viewport" content="width=device-width" />
  <meta name="generator" content={Astro.generator} />
  <link rel="sitemap" href="/sitemap-index.xml" />
  {
    schema && (
      <script type="application/ld+json" is:inline set:html={schemaScriptTag} />
    )
  }
  <SEO
    title={title}
    description={metaDescription}
    noindex={noindex}
    nofollow={nofollow}
    openGraph={{
      basic: {
        title: title || businessData.name,
        type: 'website',
        image: logo,
        url: businessData.site,
      },
      optional: {
        locale: lang,
        siteName: businessData.name,
        description: metaDescription,
      },
      image: {
        alt: businessData.name,
        width: 1200,
        height: 630,
        type: 'image/png',
      },
    }}
    extend={{
      meta: [
        { name: 'twitter:image', content: logo },
        { name: 'twitter:title', content: title },
        {
          name: 'twitter:description',
          content: metaDescription,
        },
        { name: 'theme-color', content: businessData.primaryColor },
        { name: 'apple-mobile-web-app-capable', content: 'yes' },
        { name: 'apple-mobile-web-app-status-bar-style', content: 'black' },
        { name: 'author', content: businessData.name },
      ],
      link: [
        {
          rel: 'canonical',
          href: `${businessData.site}${url.pathname}`,
        },
        { rel: 'icon', type: 'image/png', href: businessData.logo },
        {
          rel: 'apple-touch-icon',
          href: `${businessData.site}/apple-touch-icon.png`,
        },
      ],
    }}
  />
</head>
