---
import { getLangFromUrl } from '@/i18n/utils';
import { Icon } from 'astro-icon/components';
import { generateLinkWhatsapp } from '@/core/utils';
import { businessDataEnglish } from '@/core/data/business.data.en';
import { businessDataSpanish } from '@/core/data/business.data.es';

interface Props {
  size?: number;
  variant: 'primary' | 'secondary';
}
const lang = getLangFromUrl(Astro.url);
const businessData = lang === 'es' ? businessDataSpanish : businessDataEnglish;
const { size = 48, variant = 'primary' } = Astro.props;

const whatsappLinkShare = generateLinkWhatsapp(businessData.whatsapp.message);
const color = variant === 'primary' ? 'text-(--primary)' : 'text-(--secondary)';
const titleAccesibility = lang === 'es' ? 'Abrir WhatsApp' : 'Open WhatsApp';
---

<a
  href={whatsappLinkShare}
  target="_blank"
  rel="noopener noreferrer"
  aria-label={titleAccesibility}
  title={titleAccesibility}>
  <Icon
    name="tabler:brand-whatsapp"
    size={size}
    class={color}
    aria-hidden="true"
    focusable="false"
  />
  <span class="sr-only">
    {titleAccesibility}
  </span>
</a>
