---
import { Icon } from 'astro-icon/components';

/* Utils */
import { getLangFromUrl } from '@/i18n/utils';

interface Props {
  size?: number;
}

const { size = 40 } = Astro.props;

const lang = getLangFromUrl(Astro.url);

const iconName = lang === 'es' ? 'flag:us-1x1' : 'flag:es-1x1';
---

<button id="changeLanguageButton" class="changeLanguageButtons cursor-pointer">
  <Icon name={iconName} size={size} />
</button>

<script>
  import { getLocalizatedUrl } from '@i18n/utils';

  window.addEventListener('load', () => {
    const buttons = document.querySelectorAll('.changeLanguageButtons');
    buttons.forEach(button => {
      button.addEventListener('click', () => getLocalizatedUrl());
    });
  });
</script>
