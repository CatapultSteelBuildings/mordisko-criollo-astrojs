---
import { Icon } from 'astro-icon/components';

/* Lang */
import { getLangFromUrl } from '@i18n/utils';

/* Data */
import { businessDataSpanish } from '@/core/data/business.data.es';
import { businessDataEnglish } from '@/core/data/business.data.en';

/* Utils */
import { generateLinkWhatsapp } from '@/core/utils';

const lang = getLangFromUrl(Astro.url);

const businessData = lang === 'es' ? businessDataSpanish : businessDataEnglish;

const callToAction = lang === 'es' ? 'Pide Ahora    ' : 'Order Now';

const size = 48;
const whatsappLinkShare = generateLinkWhatsapp(businessData.whatsapp.message);
const titleAccesibility = lang === 'es' ? 'Abrir WhatsApp' : 'Open WhatsApp';
---

<a
  href={whatsappLinkShare}
  target="_blank"
  rel="noopener noreferrer"
  aria-label={titleAccesibility}
  title={titleAccesibility}>
  <div class="Whatsapp-Button">
    <Icon
      name="tabler:brand-whatsapp"
      size={size}
      aria-hidden="true"
      focusable="false"
    />
    <p>{callToAction}</p>
    <span class="sr-only">
      {titleAccesibility}
    </span>
  </div>
</a>

<style>
  @reference "tailwindcss";
  .Whatsapp-Button {
    @apply flex items-center justify-center gap-2 rounded-2xl bg-(--whatsapp-color) px-2 py-1 md:border-4 md:border-(--whatsapp-dark-color);
  }

  .Whatsapp-Button p {
    @apply m-0 font-bold text-(--white);
  }
</style>
